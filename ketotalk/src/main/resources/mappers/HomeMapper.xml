<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ketotalk.dao.HomeDAO">
  		
  <select id="selectYoutubeList" resultType="com.ketotalk.dto.YoutubeDTO">
  	SELECT YOUTUBE_TITLE
	  	, YOUTUBE_URL
	  	, YOUTUBE_IMG
	  	, YOUTUBE_ID
    FROM YOUTUBE_MNG
  </select>
  
  <select id="selectDiseaseList" parameterType="com.ketotalk.dto.DiseaseListDTO" resultType="com.ketotalk.dto.DiseaseListDTO">
  	SELECT DISEASE_SEQ
	  	, DISEASE_NAME
	  	, DISEASE_CONTENT
	  	, DISEASE_NAME_UN
	  	, DISEASE_CATEGORY
	  	, REMARK
	  	, DISEASE_SYMPTOM
	  	, DISEASE_CURE
    FROM DISEASE_LIST
    WHERE 1 = 1
    <if test="disease_category != 'ALL'">
    	AND DISEASE_CATEGORY = #{disease_category}
    </if>
    LIMIT #{row}
  </select>
  
  <select id="selectDiseaseSearch" parameterType="com.ketotalk.dto.DiseaseListDTO" resultType="com.ketotalk.dto.DiseaseListDTO">
  	SELECT DISEASE_SEQ
	  	, DISEASE_NAME
	  	, DISEASE_CONTENT
	  	, DISEASE_NAME_UN
	  	, DISEASE_CATEGORY
	  	, REMARK
	  	, DISEASE_SYMPTOM
	  	, DISEASE_CURE
    FROM DISEASE_LIST
    WHERE 1 = 1
    <if test="disease_category != 'ALL'">
    	AND DISEASE_CATEGORY = #{disease_category}
    </if>
    AND (
          DISEASE_NAME LIKE CONCAT_WS(#{searchKeyword},'%','%')
          OR UPPER(DISEASE_CONTENT) LIKE CONCAT_WS(#{searchKeyword},'%','%')
          OR UPPER(DISEASE_NAME_UN) LIKE CONCAT_WS(#{searchKeyword},'%','%')
      )
    LIMIT #{row}
  </select>
  
  <select id="selectDiseaseDetail" parameterType="String" resultType="com.ketotalk.dto.DiseaseListDTO">
  	SELECT DISEASE_SEQ
	  	, DISEASE_NAME
	  	, DISEASE_CONTENT
	  	, DISEASE_NAME_UN
	  	, DISEASE_CATEGORY
	  	, REMARK
	  	, DISEASE_SYMPTOM
	  	, DISEASE_CURE
    FROM DISEASE_LIST
    WHERE DISEASE_SEQ = #{key}
  </select>
  
  <select id="selectUserUniqueId" parameterType="String" resultType="com.ketotalk.dto.UserDTO">
  	SELECT USER_SEQ
  		, USER_ID
  		, USER_BIRTH
  		, USER_SEX
  		, USER_NICKNAME
  	FROM USER_MNG
  	WHERE USER_ID = #{uniqueId}
  </select>
	
	<insert id="insertUser" parameterType="com.ketotalk.dto.UserDTO">
		INSERT INTO USER_MNG (USER_ID, USER_BIRTH, USER_SEX, USER_NICKNAME)
		VALUES (
			#{user_id}
			, #{user_birth}
			, #{user_sex}
			, #{user_nickname}
		)
	</insert>

</mapper>